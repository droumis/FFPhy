function out= forallrats(fctname, selectid, dirname, prefix)
%function out= forallrats(fctname, selectid, dirname)
%function out= forallrats(fctname, selectid, dirname, prefix)
%
% [prefix]= {'kyl', 'ter', 'sta', 'fel'};
%
% e.g: forallrats('runAdaptFilter', 'all', 'adapt')


if nargin < 3; error('not enough arguments given'); end
if nargin < 4;
    prefix={'kyl', 'ter', 'sta', 'fel'};
end

global fmaux % file manager auxillary variable

% set search paths
%auxLocalPaths
if dirname(1)~= '/'; dirname= ['/' dirname]; end
if dirname(end)~= '/'; dirname= [dirname '/']; end

olddir= pwd;
nRats= length(prefix);
out= [];
for r=1:nRats
    % change directory, set local options
%    cd(['/bach4/' prefix{r} dirname]);
    cd(['/data11/chengs/' prefix{r} dirname]);
    setLocalOptions;

    % select file
    fmaux.selectid= selectid;
    fmaux.select=[ fmaux.data2dir '/select-' fmaux.selectid];
    
    % run command
    eval(fctname);

end
cd(olddir)

