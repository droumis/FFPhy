function showEEGps(mtm)
%function showEEGps()
%function showEEGps(mtm)
%
% Analyze EEG power spectrum.


sets{1}.selectid= 'pf5-fam';
sets{1}.label= 'fam';

sets{2}.selectid= 'pf5-novelArm';
%sets{2}.novelDay= 1;
%sets{2}.label= 'day1';
sets{2}.label= 'novel';

%sets{3}.selectid= 'pf5-novelArm';
%sets{3}.novelDay= 2;
%sets{3}.label= 'day2';

%sets{4}.selectid= 'pf5-novelArm';
%sets{4}.novelDay= 3;
%sets{4}.label= 'day3';

%sets{1}.selectid= 'CA1PE';
%sets{1}.label= 'all';

vars={'theta', 'width', 'max', 'stdmax'};
vlabels={'peak freq (Hz)', 'half width (Hz)', 'peak height', 'std peak height'};
if nargin<1; mtm=1; end
if(mtm)
    nvars= 4;
else 
    nvars= 3;
end
nsets= length(sets);
plotcol= {'k', 'r', 'b', 'g'};

setLocalRoot;



for is=1:nsets
    selectid= sets{is}.selectid;

    load(sprintf('%s/work/tetrodes-%s', root, selectid));
    tet= tetrodes;
    ntet= length(tet.rat);
    %    load(sprintf('%s/work/epochs-%s', root, selectid));
    %    ep= epochs;
    %    nep= length(ep.rat);

    if isfield(sets{is}, 'novelDay') & sets{is}.novelDay
        ind= find(sets{is}.novelDay== tet.day);
    else
        ind= [1:ntet]';
    end
%    keyboard

    if(mtm)
        anafile= sprintf('%s/work/psana-pmtm-%s',root,selectid);
    else
        anafile= sprintf('%s/work/psana-pwelch-%s',root,selectid);
    end
    load(anafile);

    for iv=1:nvars
        tmp= ana.(vars{iv})(ind);
        V{iv}{is}= tmp(isfinite(tmp));
%        V{iv}{is}= ana.(vars{iv});
    end
    fprintf(1, '%s: %d EEG tetrodes\n', selectid, sum(isfinite(tmp)));
%    keyboard
end

figure
opt.ident= 1;
opt.ref= 1;
%opt.plot= 'cdf';
opt.labels= {};
for is=1:nsets
    opt.labels{is}= sets{is}.label;
end

for iv=1:nvars
    subplot(2,2,iv);
%    opt.varname= vars{iv};
    opt.varname= vlabels{iv};
    if iv>1; opt.labels= {}; end
    cmpDist(V{iv}, opt);
end
myprint('large', 'EEGPowerAna');
